(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},90:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(28),i=c.n(s),r=(c(69),c(15)),o=(c(70),c(71),c(55)),j=c.n(o),d=c(56),l=c.n(d),b=c(57),h=c.n(b),u=c(111),O=c(104),m=c(58),p=c.n(m),x=(c(72),c(31)),f=x.a.initializeApp({apiKey:"AIzaSyAzfYZbiGAZXfqgCNSv4Td4icZUvL7m_FU",authDomain:"whatsapp-clone-7708.firebaseapp.com",projectId:"whatsapp-clone-7708",storageBucket:"whatsapp-clone-7708.appspot.com",messagingSenderId:"808277465978",appId:"1:808277465978:web:754a43fc7b0764e29e94c3",measurementId:"G-KC4GR3EDV4"}).firestore(),v=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,N=f,S=c(32),_=c(4);var w=function(e){var t,c=e.id,n=e.name,s=e.addNewChat,i=Object(a.useState)(""),o=Object(r.a)(i,2),j=o[0],d=o[1];return Object(a.useEffect)((function(){c&&N.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return d(e.docs.map((function(e){return e.data()})))}))}),[c]),s?Object(_.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat room");e&&N.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(_.jsx)("h2",{children:"Add new Chat"})}):Object(_.jsx)(S.b,{to:"/rooms/".concat(c),children:Object(_.jsxs)("div",{className:"sidebarChat",children:[Object(_.jsx)(u.a,{}),Object(_.jsxs)("div",{className:"sidebarChat__info",children:[Object(_.jsx)("h2",{children:n}),Object(_.jsx)("p",{children:null===(t=j[0])||void 0===t?void 0:t.message})]})]})})},C=Object(a.createContext)(),y=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(_.jsx)(C.Provider,{value:Object(a.useReducer)(t,c),children:n})},I=function(){return Object(a.useContext)(C)};var k=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=I(),i=Object(r.a)(s,2),o=i[0].user;return i[1],Object(a.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(_.jsxs)("div",{className:"sidebar",children:[Object(_.jsxs)("div",{className:"sidebar_header",children:[Object(_.jsx)(u.a,{src:null===o||void 0===o?void 0:o.photoURL}),Object(_.jsxs)("div",{className:"sidebar_headerRight",children:[Object(_.jsx)(O.a,{children:Object(_.jsx)(j.a,{})}),Object(_.jsx)(O.a,{children:Object(_.jsx)(l.a,{})}),Object(_.jsx)(O.a,{children:Object(_.jsx)(h.a,{})})]})]}),Object(_.jsx)("div",{className:"sidebar_search",children:Object(_.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(_.jsx)(p.a,{}),Object(_.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(_.jsxs)("div",{className:"sidebar_chats",children:[Object(_.jsx)(w,{addNewChat:!0}),c.map((function(e){return Object(_.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},A=c(49),D=c.n(A),T=c(59),E=(c(87),c(105)),F=c(106),P=c(107),R=c(108),U=c(109),B=c(10);var G=function(){var e,t,c=Object(a.useState)(""),n=Object(r.a)(c,2),s=n[0],i=n[1],o=Object(B.f)().roomId,j=Object(a.useState)(""),d=Object(r.a)(j,2),l=d[0],b=d[1],h=Object(a.useState)([]),m=Object(r.a)(h,2),p=m[0],f=m[1],v=I(),g=Object(r.a)(v,2),S=g[0].user;g[1],Object(a.useEffect)((function(){o&&(N.collection("rooms").doc(o).onSnapshot((function(e){b(e.data().name)})),N.collection("rooms").doc(o).collection("messages").orderBy("timestamp").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))})))}),[o]);var w=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N.collection("rooms").doc(o).collection("messages").add({message:s,name:S.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),i("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"chat",children:[Object(_.jsxs)("div",{className:"chat_header",children:[Object(_.jsx)(u.a,{src:""}),Object(_.jsxs)("div",{className:"chat_headerInfo",children:[Object(_.jsx)("h3",{children:l}),Object(_.jsxs)("p",{children:["Last seen "," ",new Date(null===(e=p[p.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(_.jsxs)("div",{className:"chat_headerRight",children:[Object(_.jsx)(O.a,{children:Object(_.jsx)(E.a,{})}),Object(_.jsx)(O.a,{children:Object(_.jsx)(F.a,{})}),Object(_.jsx)(O.a,{children:Object(_.jsx)(P.a,{})})]})]}),Object(_.jsx)("div",{className:"chat_body",children:p.map((function(e){var t;return Object(_.jsxs)("p",{className:"chat_message ".concat(e.name===S.displayName&&"chat_reciever"),children:[Object(_.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(_.jsx)("span",{className:"chat_timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(_.jsxs)("div",{className:"chat_footer",children:[Object(_.jsx)(R.a,{}),Object(_.jsxs)("form",{children:[Object(_.jsx)("input",{value:s,onChange:function(e){return i(e.target.value)},placeholder:"Type a message",type:"text"}),Object(_.jsx)("button",{onClick:w,type:"submit",children:"Send a message"})]}),Object(_.jsx)(U.a,{})]})]})},L=c(60),W=c(110),z=(c(88),c(50)),Z="SET_USER",J=function(e,t){switch(console.log(t),t.type){case Z:return Object(z.a)(Object(z.a)({},e),{},{user:t.user});default:return e}};var K=function(){var e=I(),t=Object(r.a)(e,2);Object(L.a)(t[0]);var c=t[1];return Object(_.jsx)("div",{className:"login",children:Object(_.jsxs)("div",{className:"login_container",children:[Object(_.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(_.jsx)("div",{className:"login_text",children:Object(_.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(_.jsx)(W.a,{onClick:function(){v.signInWithPopup(g).then((function(e){c({type:Z,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})]})})};var V=function(){var e=I(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(_.jsx)("div",{className:"app",children:c?Object(_.jsx)("div",{className:"app_body",children:Object(_.jsxs)(S.a,{children:[Object(_.jsx)(k,{}),Object(_.jsxs)(B.c,{children:[Object(_.jsx)(B.a,{path:"/rooms/:roomId",children:Object(_.jsx)(G,{})}),Object(_.jsx)(B.a,{path:"/",children:Object(_.jsx)(G,{})})]})]})}):Object(_.jsx)(K,{})})},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,112)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))};i.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(y,{initialState:{user:null},reducer:J,children:Object(_.jsx)(V,{})})}),document.getElementById("root")),q()}},[[90,1,2]]]);
//# sourceMappingURL=main.7a517bd6.chunk.js.map